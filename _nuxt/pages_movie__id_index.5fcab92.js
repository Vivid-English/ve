(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{153:function(t,e,n){var content=n(164);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(59).default)("3ab39bca",content,!0,{sourceMap:!1})},155:function(t,e,n){"use strict";n.r(e),n.d(e,"getStarList",(function(){return d})),n.d(e,"hasStar",(function(){return h})),n.d(e,"addStar",(function(){return v}));n(162);var r=n(157),c=(n(28),n(14),n(41),n(154),n(166)),map=new Map;c.scenexx.forEach((function(t){map.set(t.id,t)}));var o,l=(o=localStorage.getItem("StarList"))?JSON.parse(o):[],f=function t(e){Object(r.a)(this,t),this.id=e,this.created_at=(new Date).toLocaleDateString()};function d(){return l.map((function(t){return map.get(t.id)}))}function h(t){return l.findIndex((function(e){return e.id===t.id}))>-1}function v(t){var e=l.findIndex((function(e){return e.id===t.id}));if(-1===e){var n=new f(t.id);l.splice(0,0,n)}else l.splice(e,1);localStorage.setItem("StarList",JSON.stringify(l))}},156:function(t,e,n){var r=n(20),c=n(77),o=n(21),l=n(17),f=n(160);t.exports=function(t,e){var n=1==t,d=2==t,h=3==t,v=4==t,m=6==t,x=5==t||m,_=e||f;return function(e,f,y){for(var S,w,C=o(e),k=c(C),A=r(f,y,3),I=l(k.length),O=0,E=n?_(e,I):d?_(e,0):void 0;I>O;O++)if((x||O in k)&&(w=A(S=k[O],O,C),t))if(n)E[O]=w;else if(w)switch(t){case 3:return!0;case 5:return S;case 6:return O;case 2:E.push(S)}else if(v)return!1;return m?-1:h||v?v:E}}},157:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},159:function(t,e,n){"use strict";var r=n(7),c=n(156)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}}),n(76)("find")},160:function(t,e,n){var r=n(161);t.exports=function(t,e){return new(r(t))(e)}},161:function(t,e,n){var r=n(10),c=n(105),o=n(2)("species");t.exports=function(t){var e;return c(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!c(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},162:function(t,e,n){"use strict";var r=n(7),c=n(156)(6),o="findIndex",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),r(r.P+r.F*l,"Array",{findIndex:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}}),n(76)(o)},163:function(t,e,n){"use strict";var r=n(153);n.n(r).a},164:function(t,e,n){(e=n(58)(!1)).push([t.i,".table caption{caption-side:top}.scene caption img{max-width:100%;display:block;margin:auto}a.play{padding:0 11px}.color0{color:#7f7f7f}.color1{color:#00f}.color2{color:#0f0}.color3{color:red}.color4{color:#0ff}.color5{color:#f0f}.color6{color:#ff7f00}.color7{color:#7f00ff}.color8{color:#007fff}.color9{color:#ff0}",""]),t.exports=e},165:function(t,e,n){"use strict";n(159),n(29),n(28),n(14),n(41),n(154);var r={name:"Scene",props:{scene:{type:Object,required:!0},rolexx:{type:Array,required:!0}},data:function(){return{all:!1,star:!1,hasHidden:!1}},computed:{starURI:function(){return this.star?"image/star-golden.svg":"image/star.svg"}},created:function(){this.hasHidden=!1===this.scene.linexx.every((function(line){return line.visible})),this.setColor(),this.setName(),this.checkStar()},methods:{setColor:function(){var t=[],e=new Map;if(this.scene.linexx.forEach((function(line){e.get(line.role_id)||(t.push(line.role_id),e.set(line.role_id,"color0"))})),t.length>1)for(var n=0;n<t.length;n++){var r=n+1;r>9&&(r=9),e.set(t[n],"color".concat(r))}this.scene.linexx.forEach((function(line){line.color=e.get(line.role_id)}))},setName:function(){var t=this;this.scene.linexx.forEach((function(line){line.name="";var e=t.rolexx.find((function(t){return t.id===line.role_id}));e&&(line.name=e.name)}))},addStar:function(){n(155).addStar(this.scene),this.checkStar()},checkStar:function(){var data=n(155);this.star=data.hasStar(this.scene)}}},c=(n(163),n(6)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"col-sm-12"},[n("table",{staticClass:"table table-borderless scene",attrs:{id:"scene"+t.scene.id}},[n("caption",[n("img",{attrs:{src:t.scene.image,alt:t.scene.title}})]),t._v(" "),n("tbody",[n("tr",[n("td",{staticClass:"text-right",attrs:{width:"25%"}},[n("img",{staticStyle:{height:"24px"},attrs:{src:t.starURI,alt:"star"},on:{click:t.addStar}})]),t._v(" "),n("td",[n("span",{staticClass:"mr11"},[t._v(t._s(t.scene.time))]),t._v(" "),t.hasHidden?n("span",{staticClass:"inline custom-control custom-switch mr11"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.all,expression:"all"}],staticClass:"custom-control-input",attrs:{id:"linescene"+t.scene.id,type:"checkbox"},domProps:{checked:Array.isArray(t.all)?t._i(t.all,null)>-1:t.all},on:{change:function(e){var n=t.all,r=e.target,c=!!r.checked;if(Array.isArray(n)){var o=t._i(n,null);r.checked?o<0&&(t.all=n.concat([null])):o>-1&&(t.all=n.slice(0,o).concat(n.slice(o+1)))}else t.all=c}}}),t._v(" "),n("label",{staticClass:"custom-control-label",attrs:{for:"linescene"+t.scene.id}})]):t._e(),t._v(" "),t.scene.video?n("a",{staticClass:"play",attrs:{href:t.scene.video,target:"_blank"}},[n("img",{staticStyle:{height:"32px"},attrs:{src:"image/play.svg",alt:"play"}})]):t._e()])]),t._v(" "),t._l(t.scene.linexx,(function(line){return n("tr",{directives:[{name:"show",rawName:"v-show",value:line.visible||t.all,expression:"line.visible || all"}],key:line.id},[n("td",{staticClass:"text-right",class:line.color},[t._v(t._s(line.name))]),t._v(" "),n("td",[t._v(t._s(line.text))])])}))],2)])])}),[],!1,null,null,null);e.a=component.exports},183:function(t,e,n){"use strict";n.r(e);var r={name:"SceneList",components:{Scene:n(165).a},props:{list:{type:Array,required:!0},rolexx:{type:Array,required:!0}}},c=n(6),o=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("head"),t._v(" "),t._l(t.list,(function(e){return n("div",{key:e.id,staticClass:"row"},[n("hr",{staticClass:"col-sm-12"}),t._v(" "),n("Scene",{attrs:{scene:e,rolexx:t.rolexx}})],1)})),t._v(" "),t._t("foot")],2)}),[],!1,null,null,null).exports,l=n(158),f={name:"Movie",components:{SceneList:o},asyncData:function(t){var e=t.params,n=t.error,r=parseInt(e.id);try{var c=Object(l.b)(r);return c||n({statusCode:404,message:"Not Found"}),{movie:c,rolexx:Object(l.d)()}}catch(t){n({statusCode:500,message:t.message})}},head:function(){return{title:this.movie.title}}},d=Object(c.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("SceneList",{attrs:{list:this.movie.scenexx,rolexx:this.rolexx}},[e("template",{slot:"head"},[e("h1",{staticClass:"m11"},[this._v(this._s(this.movie.title+" "+this.movie.chinese))])])],2)}),[],!1,null,null,null);e.default=d.exports}}]);