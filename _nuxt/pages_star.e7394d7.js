(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{153:function(t,e,n){var content=n(164);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(59).default)("3ab39bca",content,!0,{sourceMap:!1})},155:function(t,e,n){"use strict";n.r(e),n.d(e,"getStarList",(function(){return f})),n.d(e,"hasStar",(function(){return h})),n.d(e,"addStar",(function(){return v}));n(162);var r=n(157),o=(n(28),n(14),n(41),n(154),n(166)),map=new Map;o.scenexx.forEach((function(t){map.set(t.id,t)}));var c,l=(c=localStorage.getItem("StarList"))?JSON.parse(c):[],d=function t(e){Object(r.a)(this,t),this.id=e,this.created_at=(new Date).toLocaleDateString()};function f(){return l.map((function(t){return map.get(t.id)}))}function h(t){return l.findIndex((function(e){return e.id===t.id}))>-1}function v(t){var e=l.findIndex((function(e){return e.id===t.id}));if(-1===e){var n=new d(t.id);l.splice(0,0,n)}else l.splice(e,1);localStorage.setItem("StarList",JSON.stringify(l))}},156:function(t,e,n){var r=n(20),o=n(77),c=n(21),l=n(17),d=n(160);t.exports=function(t,e){var n=1==t,f=2==t,h=3==t,v=4==t,m=6==t,y=5==t||m,x=e||d;return function(e,d,_){for(var S,w,k=c(e),C=o(k),O=r(d,_,3),j=l(C.length),A=0,L=n?x(e,j):f?x(e,0):void 0;j>A;A++)if((y||A in C)&&(w=O(S=C[A],A,k),t))if(n)L[A]=w;else if(w)switch(t){case 3:return!0;case 5:return S;case 6:return A;case 2:L.push(S)}else if(v)return!1;return m?-1:h||v?v:L}}},157:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},159:function(t,e,n){"use strict";var r=n(7),o=n(156)(5),c=!0;"find"in[]&&Array(1).find((function(){c=!1})),r(r.P+r.F*c,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(76)("find")},160:function(t,e,n){var r=n(161);t.exports=function(t,e){return new(r(t))(e)}},161:function(t,e,n){var r=n(10),o=n(105),c=n(2)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[c])&&(e=void 0)),void 0===e?Array:e}},162:function(t,e,n){"use strict";var r=n(7),o=n(156)(6),c="findIndex",l=!0;c in[]&&Array(1)[c]((function(){l=!1})),r(r.P+r.F*l,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(76)(c)},163:function(t,e,n){"use strict";var r=n(153);n.n(r).a},164:function(t,e,n){(e=n(58)(!1)).push([t.i,".table caption{caption-side:top}.scene caption img{max-width:100%;display:block;margin:auto}a.play{padding:0 11px}.color0{color:#7f7f7f}.color1{color:#00f}.color2{color:#0f0}.color3{color:red}.color4{color:#0ff}.color5{color:#f0f}.color6{color:#ff7f00}.color7{color:#7f00ff}.color8{color:#007fff}.color9{color:#ff0}",""]),t.exports=e},165:function(t,e,n){"use strict";n(159),n(29),n(28),n(14),n(41),n(154);var r={name:"Scene",props:{scene:{type:Object,required:!0},rolexx:{type:Array,required:!0}},data:function(){return{all:!1,star:!1,hasHidden:!1}},computed:{starURI:function(){return this.star?"image/star-golden.svg":"image/star.svg"}},created:function(){this.hasHidden=!1===this.scene.linexx.every((function(line){return line.visible})),this.setColor(),this.setName(),this.checkStar()},methods:{setColor:function(){var t=[],e=new Map;if(this.scene.linexx.forEach((function(line){e.get(line.role_id)||(t.push(line.role_id),e.set(line.role_id,"color0"))})),t.length>1)for(var n=0;n<t.length;n++){var r=n+1;r>9&&(r=9),e.set(t[n],"color".concat(r))}this.scene.linexx.forEach((function(line){line.color=e.get(line.role_id)}))},setName:function(){var t=this;this.scene.linexx.forEach((function(line){line.name="";var e=t.rolexx.find((function(t){return t.id===line.role_id}));e&&(line.name=e.name)}))},addStar:function(){n(155).addStar(this.scene),this.checkStar()},checkStar:function(){var data=n(155);this.star=data.hasStar(this.scene)}}},o=(n(163),n(6)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"col-sm-12"},[n("table",{staticClass:"table table-borderless scene",attrs:{id:"scene"+t.scene.id}},[n("caption",[n("img",{attrs:{src:t.scene.image,alt:t.scene.title}})]),t._v(" "),n("tbody",[n("tr",[n("td",{staticClass:"text-right",attrs:{width:"25%"}},[n("img",{staticStyle:{height:"24px"},attrs:{src:t.starURI,alt:"star"},on:{click:t.addStar}})]),t._v(" "),n("td",[n("span",{staticClass:"mr11"},[t._v(t._s(t.scene.time))]),t._v(" "),t.hasHidden?n("span",{staticClass:"inline custom-control custom-switch mr11"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.all,expression:"all"}],staticClass:"custom-control-input",attrs:{id:"linescene"+t.scene.id,type:"checkbox"},domProps:{checked:Array.isArray(t.all)?t._i(t.all,null)>-1:t.all},on:{change:function(e){var n=t.all,r=e.target,o=!!r.checked;if(Array.isArray(n)){var c=t._i(n,null);r.checked?c<0&&(t.all=n.concat([null])):c>-1&&(t.all=n.slice(0,c).concat(n.slice(c+1)))}else t.all=o}}}),t._v(" "),n("label",{staticClass:"custom-control-label",attrs:{for:"linescene"+t.scene.id}})]):t._e(),t._v(" "),t.scene.video?n("a",{staticClass:"play",attrs:{href:t.scene.video,target:"_blank"}},[n("img",{staticStyle:{height:"32px"},attrs:{src:"image/play.svg",alt:"play"}})]):t._e()])]),t._v(" "),t._l(t.scene.linexx,(function(line){return n("tr",{directives:[{name:"show",rawName:"v-show",value:line.visible||t.all,expression:"line.visible || all"}],key:line.id},[n("td",{staticClass:"text-right",class:line.color},[t._v(t._s(line.name))]),t._v(" "),n("td",[t._v(t._s(line.text))])])}))],2)])])}),[],!1,null,null,null);e.a=component.exports},170:function(t,e,n){"use strict";n(28),n(14),n(41),n(154);var r=n(73);var o=n(82);function c(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=n(157);function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}var h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Object(l.a)(this,t),this.source=e,this.list=[],this.amount=n,this.more=!0,this.load()}return f(t,[{key:"load",value:function(){var t,e=this.list.length,n=this.source.slice(e,e+this.amount);(t=this.list).splice.apply(t,[e,0].concat(c(n))),this.more=this.list.length<this.source.length}}]),t}(),v=new(function(){function t(){Object(l.a)(this,t),this.map=new Map}return f(t,[{key:"make",value:function(t,e,n){var r=new h(e,n);return this.map.set(t,r),r}},{key:"get",value:function(t){return this.map.get(t)}}]),t}());e.a=v},171:function(t,e,n){"use strict";var r={name:"ListLoader",props:{loader:{type:Object,required:!0}}},o=n(6),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("head"),t._v(" "),t._l(t.loader.list,(function(e){return n("div",{key:e.id,staticClass:"row"},[n("hr",{staticClass:"col-sm-12"}),t._v(" "),t._t("body",null,{item:e})],2)})),t._v(" "),n("div",{staticClass:"mt11"},[t._t("foot"),t._v(" "),n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-outline-primary rounded-pill",attrs:{disabled:!t.loader.more},on:{click:function(e){return t.loader.load()}}},[t._v("\n                more\n            ")])])],2)],2)}),[],!1,null,null,null);e.a=component.exports},188:function(t,e,n){"use strict";n.r(e);var r=n(171),o=n(165),c=n(170),l=n(158),d={name:"Star",components:{ListLoader:r.a,Scene:o.a},data:function(){return{title:"收藏列表",loader:null,rolexx:[]}},created:function(){var data=n(155);this.loader=c.a.make("StarPageLoader",data.getStarList()),this.rolexx=Object(l.d)()},head:function(){return{title:this.title}}},f=n(6),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loader?n("ListLoader",{attrs:{loader:t.loader},scopedSlots:t._u([{key:"body",fn:function(e){return[n("Scene",{attrs:{scene:e.item,rolexx:t.rolexx}})]}}],null,!1,3150317781)},[n("template",{slot:"head"},[0===t.loader.source.length?n("div",{staticClass:"text-secondary text-center m011"},[n("h2",[t._v("没有收藏")])]):n("h1",{staticClass:"m11"},[t._v(t._s(t.title))])])],2):t._e()}),[],!1,null,null,null);e.default=component.exports}}]);